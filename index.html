<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Holy Quran - Read by Juz (Para) or Surah</title>
    
    <!-- Tailwind CSS for modern styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts: Inter for UI, Amiri Quran for Arabic -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Amiri+Quran&display=swap" rel="stylesheet">
    
    <style>
        /* Custom styles for fonts and text direction */
        body {
            font-family: 'Inter', sans-serif;
        }
        .arabic-text {
            font-family: 'Amiri Quran', serif;
            font-size: 2rem; /* 32px */
            line-height: 2.75rem; /* 44px */
            direction: rtl;
            text-align: right;
        }
        /* Smooth transitions for hover effects */
        .transition-colors {
            transition-property: color, background-color, border-color, text-decoration-color, fill, stroke;
            transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
            transition-duration: 150ms;
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-800">

    <!-- Header -->
    <header class="bg-gradient-to-r from-teal-600 to-teal-700 text-white shadow-lg">
        <div class="container mx-auto px-4 py-6 text-center">
            <h1 class="text-3xl md:text-4xl font-bold">The Holy Quran</h1>
            <p class="text-teal-100 mt-2">Read by Juz' (Para) or Surah</p>
        </div>
    </header>

    <!-- Selection Screen -->
    <main id="selection-screen" class="container mx-auto px-4 py-8">
        <!-- Juz Selector Grid -->
        <section id="juz-selector" class="mb-8">
            <h2 class="text-2xl font-semibold text-center mb-6 text-gray-700">Select a Juz' (Para)</h2>
            <div id="juz-grid" class="grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-6 gap-4">
                <!-- Juz buttons will be generated here by JavaScript -->
            </div>
        </section>

        <!-- Surah Selector -->
        <section id="surah-selector" class="mb-8">
            <h2 class="text-2xl font-semibold text-center mb-6 text-gray-700">Or Select a Surah (Chapter)</h2>
            <div class="max-w-md mx-auto flex">
                <select id="surah-dropdown" class="w-full px-4 py-2 border border-gray-300 rounded-l-lg focus:outline-none focus:ring-2 focus:ring-teal-500">
                    <option value="" disabled selected>Choose a Surah...</option>
                </select>
                <button id="read-surah-btn" class="bg-teal-600 text-white font-semibold px-6 py-2 rounded-r-lg hover:bg-teal-700 focus:outline-none focus:ring-2 focus:ring-teal-500 transition-colors">
                    Read
                </button>
            </div>
        </section>
    </main>

    <!-- Full-Width Quran Content Display Area -->
    <section id="quran-reader" class="hidden w-full bg-white">
        <div class="px-4 md:px-8 lg:px-16 py-6 md:py-8">
            <!-- Juz/Surah Header with Controls -->
            <div class="flex flex-col sm:flex-row justify-between items-center pb-4 mb-6 border-b-2 border-gray-200">
                <h2 id="content-title" class="text-3xl font-bold text-gray-800 mb-4 sm:mb-0"></h2>
                <div class="flex items-center space-x-4">
                    <!-- Translation Toggle Switch -->
                    <label for="translation-toggle" class="relative inline-flex items-center cursor-pointer">
                        <input type="checkbox" id="translation-toggle" class="sr-only peer">
                        <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-teal-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-teal-600"></div>
                        <span class="ml-3 text-sm font-medium text-gray-700">Show Translation</span>
                    </label>
                    <!-- Back Button -->
                    <button id="back-button" class="bg-gray-600 text-white font-semibold py-2 px-4 rounded-lg hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-opacity-50 transition-colors">
                        Back to Selection
                    </button>
                </div>
            </div>
            <!-- Verses will be loaded here -->
            <div id="verses-container"></div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-gray-800 text-gray-300 text-center py-6 mt-12">
        
        <p class="text-xs mt-2">&copy;  A project by Daniyal Nawaz for easy access to the Holy Quran.</p>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // DOM Elements
            const selectionScreen = document.getElementById('selection-screen');
            const quranReader = document.getElementById('quran-reader');
            const juzGrid = document.getElementById('juz-grid');
            const surahDropdown = document.getElementById('surah-dropdown');
            const readSurahBtn = document.getElementById('read-surah-btn');
            const contentTitle = document.getElementById('content-title');
            const versesContainer = document.getElementById('verses-container');
            const translationToggle = document.getElementById('translation-toggle');
            const backButton = document.getElementById('back-button');

            // Static list of Surahs
            const surahList = [
                { number: 1, englishName: "Al-Fatihah", arabicName: "الفاتحة" }, { number: 2, englishName: "Al-Baqarah", arabicName: "البقرة" }, { number: 3, englishName: "Aal-E-Imran", arabicName: "آل عمران" },
                { number: 4, englishName: "An-Nisa", arabicName: "النساء" }, { number: 5, englishName: "Al-Ma'idah", arabicName: "المائدة" }, { number: 6, englishName: "Al-An'am", arabicName: "الأنعام" },
                { number: 7, englishName: "Al-A'raf", arabicName: "الأعراف" }, { number: 8, englishName: "Al-Anfal", arabicName: "الأنفال" }, { number: 9, englishName: "At-Tawbah", arabicName: "التوبة" },
                { number: 10, englishName: "Yunus", arabicName: "يونس" }, { number: 11, englishName: "Hud", arabicName: "هود" }, { number: 12, englishName: "Yusuf", arabicName: "يوسف" },
                { number: 13, englishName: "Ar-Ra'd", arabicName: "الرعد" }, { number: 14, englishName: "Ibrahim", arabicName: "إبراهيم" }, { number: 15, englishName: "Al-Hijr", arabicName: "الحجر" },
                { number: 16, englishName: "An-Nahl", arabicName: "النحل" }, { number: 17, englishName: "Al-Isra", arabicName: "الإسراء" }, { number: 18, englishName: "Al-Kahf", arabicName: "الكهف" },
                { number: 19, englishName: "Maryam", arabicName: "مريم" }, { number: 20, englishName: "Taha", arabicName: "طه" }, { number: 21, englishName: "Al-Anbiya", arabicName: "الأنبياء" },
                { number: 22, englishName: "Al-Hajj", arabicName: "الحج" }, { number: 23, englishName: "Al-Mu'minun", arabicName: "المؤمنون" }, { number: 24, englishName: "An-Nur", arabicName: "النور" },
                { number: 25, englishName: "Al-Furqan", arabicName: "الفرقان" }, { number: 26, englishName: "Ash-Shu'ara", arabicName: "الشعراء" }, { number: 27, englishName: "An-Naml", arabicName: "النمل" },
                { number: 28, englishName: "Al-Qasas", arabicName: "القصص" }, { number: 29, englishName: "Al-Ankabut", arabicName: "العنكبوت" }, { number: 30, englishName: "Ar-Rum", arabicName: "الروم" },
                { number: 31, englishName: "Luqman", arabicName: "لقمان" }, { number: 32, englishName: "As-Sajdah", arabicName: "السجدة" }, { number: 33, englishName: "Al-Ahzab", arabicName: "الأحزاب" },
                { number: 34, englishName: "Saba", arabicName: "سبأ" }, { number: 35, englishName: "Fatir", arabicName: "فاطر" }, { number: 36, englishName: "Ya-Sin", arabicName: "يس" },
                { number: 37, englishName: "As-Saffat", arabicName: "الصافات" }, { number: 38, englishName: "Sad", arabicName: "ص" }, { number: 39, englishName: "Az-Zumar", arabicName: "الزمر" },
                { number: 40, englishName: "Ghafir", arabicName: "غافر" }, { number: 41, englishName: "Fussilat", arabicName: "فصلت" }, { number: 42, englishName: "Ash-Shura", arabicName: "الشورى" },
                { number: 43, englishName: "Az-Zukhruf", arabicName: "الزخرف" }, { number: 44, englishName: "Ad-Dukhan", arabicName: "الدخان" }, { number: 45, englishName: "Al-Jathiyah", arabicName: "الجاثية" },
                { number: 46, englishName: "Al-Ahqaf", arabicName: "الأحقاف" }, { number: 47, englishName: "Muhammad", arabicName: "محمد" }, { number: 48, englishName: "Al-Fath", arabicName: "الفتح" },
                { number: 49, englishName: "Al-Hujurat", arabicName: "الحجرات" }, { number: 50, englishName: "Qaf", arabicName: "ق" }, { number: 51, englishName: "Ad-Dhariyat", arabicName: "الذاريات" },
                { number: 52, englishName: "At-Tur", arabicName: "الطور" }, { number: 53, englishName: "An-Najm", arabicName: "النجم" }, { number: 54, englishName: "Al-Qamar", arabicName: "القمر" },
                { number: 55, englishName: "Ar-Rahman", arabicName: "الرحمن" }, { number: 56, englishName: "Al-Waqi'ah", arabicName: "الواقعة" }, { number: 57, englishName: "Al-Hadid", arabicName: "الحديد" },
                { number: 58, englishName: "Al-Mujadila", arabicName: "المجادلة" }, { number: 59, englishName: "Al-Hashr", arabicName: "الحشر" }, { number: 60, englishName: "Al-Mumtahanah", arabicName: "الممتحنة" },
                { number: 61, englishName: "As-Saff", arabicName: "الصف" }, { number: 62, englishName: "Al-Jumu'ah", arabicName: "الجمعة" }, { number: 63, englishName: "Al-Munafiqun", arabicName: "المنافقون" },
                { number: 64, englishName: "At-Taghabun", arabicName: "التغابن" }, { number: 65, englishName: "At-Talaq", arabicName: "الطلاق" }, { number: 66, englishName: "At-Tahrim", arabicName: "التحريم" },
                { number: 67, englishName: "Al-Mulk", arabicName: "الملك" }, { number: 68, englishName: "Al-Qalam", arabicName: "القلم" }, { number: 69, englishName: "Al-Haqqah", arabicName: "الحاقة" },
                { number: 70, englishName: "Al-Ma'arij", arabicName: "المعارج" }, { number: 71, englishName: "Nuh", arabicName: "نوح" }, { number: 72, englishName: "Al-Jinn", arabicName: "الجن" },
                { number: 73, englishName: "Al-Muzzammil", arabicName: "المزمل" }, { number: 74, englishName: "Al-Muddaththir", arabicName: "المدثر" }, { number: 75, englishName: "Al-Qiyamah", arabicName: "القيامة" },
                { number: 76, englishName: "Al-Insan", arabicName: "الإنسان" }, { number: 77, englishName: "Al-Mursalat", arabicName: "المرسلات" }, { number: 78, englishName: "An-Naba'", arabicName: "النبأ" },
                { number: 79, englishName: "An-Nazi'at", arabicName: "النازعات" }, { number: 80, englishName: "Abasa", arabicName: "عبس" }, { number: 81, englishName: "At-Takwir", arabicName: "التكوير" },
                { number: 82, englishName: "Al-Infitar", arabicName: "الانفطار" }, { number: 83, englishName: "Al-Mutaffifin", arabicName: "المطففين" }, { number: 84, englishName: "Al-Inshiqaq", arabicName: "الانشقاق" },
                { number: 85, englishName: "Al-Buruj", arabicName: "البروج" }, { number: 86, englishName: "At-Tariq", arabicName: "الطارق" }, { number: 87, englishName: "Al-A'la", arabicName: "الأعلى" },
                { number: 88, englishName: "Al-Ghashiyah", arabicName: "الغاشية" }, { number: 89, englishName: "Al-Fajr", arabicName: "الفجر" }, { number: 90, englishName: "Al-Balad", arabicName: "البلد" },
                { number: 91, englishName: "Ash-Shams", arabicName: "الشمس" }, { number: 92, englishName: "Al-Lail", arabicName: "الليل" }, { number: 93, englishName: "Ad-Duha", arabicName: "الضحى" },
                { number: 94, englishName: "Ash-Sharh", arabicName: "الشرح" }, { number: 95, englishName: "At-Tin", arabicName: "التين" }, { number: 96, englishName: "Al-Alaq", arabicName: "العلق" },
                { number: 97, englishName: "Al-Qadr", arabicName: "القدر" }, { number: 98, englishName: "Al-Bayyinah", arabicName: "البينة" }, { number: 99, englishName: "Az-Zalzalah", arabicName: "الزلزلة" },
                { number: 100, englishName: "Al-Adiyat", arabicName: "العاديات" }, { number: 101, englishName: "Al-Qari'ah", arabicName: "القارعة" }, { number: 102, englishName: "At-Takathur", arabicName: "التكاثر" },
                { number: 103, englishName: "Al-Asr", arabicName: "العصر" }, { number: 104, englishName: "Al-Humazah", arabicName: "الهمزة" }, { number: 105, englishName: "Al-Fil", arabicName: "الفيل" },
                { number: 106, englishName: "Quraysh", arabicName: "قريش" }, { number: 107, englishName: "Al-Ma'un", arabicName: "الماعون" }, { number: 108, englishName: "Al-Kawthar", arabicName: "الكوثر" },
                { number: 109, englishName: "Al-Kafirun", arabicName: "الكافرون" }, { number: 110, englishName: "An-Nasr", arabicName: "النصر" }, { number: 111, englishName: "Al-Masad", arabicName: "المسد" },
                { number: 112, englishName: "Al-Ikhlas", arabicName: "الإخلاص" }, { number: 113, englishName: "Al-Falaq", arabicName: "الفلق" }, { number: 114, englishName: "An-Nas", arabicName: "الناس" }
            ];

            // --- 1. Populate UI Elements ---
            // Generate Juz' buttons
            for (let i = 1; i <= 30; i++) {
                const button = document.createElement('button');
                button.textContent = `Juz' ${i}`;
                button.className = 'bg-teal-600 text-white font-semibold py-3 px-4 rounded-lg hover:bg-teal-700 focus:outline-none focus:ring-2 focus:ring-teal-500 focus:ring-opacity-50 transition-colors';
                button.onclick = () => loadJuz(i);
                juzGrid.appendChild(button);
            }

            // Populate Surah dropdown
            surahList.forEach(surah => {
                const option = document.createElement('option');
                option.value = surah.number;
                option.textContent = `${surah.number}. ${surah.englishName} (${surah.arabicName})`;
                surahDropdown.appendChild(option);
            });

            // --- 2. Event Listeners ---
            readSurahBtn.addEventListener('click', () => {
                const selectedSurahNumber = surahDropdown.value;
                if (selectedSurahNumber) {
                    loadSurah(selectedSurahNumber);
                }
            });

            backButton.addEventListener('click', () => {
                selectionScreen.classList.remove('hidden');
                quranReader.classList.add('hidden');
            });

            translationToggle.addEventListener('change', (event) => {
                const translations = document.querySelectorAll('.translation-text');
                translations.forEach(trans => {
                    trans.classList.toggle('hidden', !event.target.checked);
                });
            });

            // --- 3. Loading Functions ---
            async function loadJuz(juzNumber) {
                showReader(`Juz' ${juzNumber}`);
                try {
                    const arabicUrl = `https://api.alquran.cloud/v1/juz/${juzNumber}/quran-uthmani`;
                    const englishUrl = `https://api.alquran.cloud/v1/juz/${juzNumber}/en.sahih`;
                    const [arabicResponse, englishResponse] = await Promise.all([fetch(arabicUrl), fetch(englishUrl)]);
                    if (!arabicResponse.ok || !englishResponse.ok) throw new Error('API request failed');
                    const arabicData = await arabicResponse.json();
                    const englishData = await englishResponse.json();
                    displayContent(arabicData.data.ayahs, englishData.data.ayahs, true);
                } catch (error) {
                    showError(error);
                }
            }

            async function loadSurah(surahNumber) {
                const surahInfo = surahList.find(s => s.number == surahNumber);
                showReader(`Surah ${surahInfo.englishName} (${surahInfo.arabicName})`);
                try {
                    // FIX: The API requires two separate calls for Surahs, just like for Juz'.
                    const arabicUrl = `https://api.alquran.cloud/v1/surah/${surahNumber}/quran-uthmani`;
                    const englishUrl = `https://api.alquran.cloud/v1/surah/${surahNumber}/en.sahih`;
                    const [arabicResponse, englishResponse] = await Promise.all([fetch(arabicUrl), fetch(englishUrl)]);
                    
                    if (!arabicResponse.ok || !englishResponse.ok) {
                        throw new Error(`HTTP error! status: ${arabicResponse.status} / ${englishResponse.status}`);
                    }
                    
                    const arabicData = await arabicResponse.json();
                    const englishData = await englishResponse.json();
                    
                    displayContent(arabicData.data.ayahs, englishData.data.ayahs, false);
                } catch (error) {
                    showError(error);
                }
            }

            // --- 4. Display and Helper Functions ---
            function showReader(title) {
                contentTitle.textContent = title;
                selectionScreen.classList.add('hidden');
                quranReader.classList.remove('hidden');
                translationToggle.checked = false;
                versesContainer.innerHTML = `<div class="text-center text-gray-500 py-8"><p class="text-lg">Loading...</p></div>`;
            }

            function displayContent(arabicAyahs, englishAyahs, isJuz) {
                let html = '';
                let currentSurahNumber = null;

                arabicAyahs.forEach((ayah, index) => {
                    const translation = (englishAyahs && englishAyahs[index]) ? englishAyahs[index].text : '[Translation not available]';

                    if (isJuz && ayah.surah.number !== currentSurahNumber) {
                        currentSurahNumber = ayah.surah.number;
                        html += `
                            <div class="my-8 pt-6 border-t-2 border-gray-200">
                                <h3 class="text-2xl font-semibold text-gray-700 mb-4">
                                    ${ayah.surah.englishName} (${ayah.surah.name})
                                </h3>
                            </div>
                        `;
                    }

                    html += `
                        <div class="ayah-container mb-6 pb-4 border-b border-gray-100">
                            <p class="arabic-text mb-3">${ayah.text} <span class="ayah-number text-teal-600 font-bold text-2xl">۝ ${ayah.numberInSurah}</span></p>
                            <p class="translation-text hidden text-gray-600 text-sm md:text-base italic leading-relaxed">${translation}</p>
                        </div>
                    `;
                });
                versesContainer.innerHTML = html;
            }
            
            function showError(error) {
                console.error("Failed to load content:", error);
                versesContainer.innerHTML = `
                    <div class="text-center text-red-500 py-8">
                        <p class="text-lg font-semibold">Failed to load content.</p>
                        <p class="text-sm">${error.message}</p>
                        <p class="text-sm mt-2">Please check your internet connection and try again.</p>
                    </div>
                `;
            }
        });
    </script>
</body>
</html>
